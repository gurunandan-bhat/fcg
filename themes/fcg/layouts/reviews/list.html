{{ define "main" }}
  <div class="container col-xxl-8 px-2 py-2">
    <div class="row flex-lg-row-reverse align-items-center g-5 mt-5">
      <div class="col-lg-6">
        <img
          src="/images/reviews/Reviews.Pg.Image.png"
          class="d-block mx-lg-auto img-responsive w-100"
          alt="Side Banner"
          loading="lazy" />
        <!-- <p class="small">
          Image used as a filler - may change in the final version
        </p> -->
      </div>
      <div class="col-lg-6 lead">
        {{ .Content }}
      </div>
    </div>
  </div>
  {{ $paginator := .Paginate .Pages 6 }}
  {{ $pageReviews := $paginator.Pages }}
  <div class="container">
    <div class="d-flex justify-content-center py-3 mb-3">
      {{ template "_internal/pagination.html" . }}
    </div>
    <div class="row">
      <div class="col-md-4 offset-md-1 highlight">
        {{ $videoReviews := where $paginator.Pages "Type" "video" }}
        <div class="row">
          <h4 class="my-4">Video Reviews</h4>
          {{ if $videoReviews | len }}
            {{ range  $videoReviews }}
              <div class="col-md-12">
                {{ block "video-review" . }}{{ end }}
              </div>
            {{ end }}
          {{ else }}
            <h6>No Video reviews available in this period.</h6>
          {{ end }}
        </div>
      </div>
      <div class="col-md-5 offset-md-1">
        <div class="row">
          {{ $printReviews := where $paginator.Pages "Type" "print" }}
          {{ if $printReviews | len }}
            <h4 class="my-4">Print/Online Reviews</h4>
            {{ range  $printReviews }}
              <div class="col-md-12">
                {{ block "print-review" . }}{{ end }}
              </div>
            {{ end }}
          {{ end }}
        </div>
      </div>
    </div>
    <div class="d-flex justify-content-center py-3 mb-3">
      {{ template "_internal/pagination.html" . }}
    </div>
  </div>
  <script>
    let url = window.location.href;
    const mch = url.match(/page\/(\d+)\/$/);
    if (mch && mch[1] !== 1) {
      let anch = document.getElementById("pg-top");
      window.addEventListener("load", function (e) {
        anch.scrollIntoView();
      });
    }
  </script>
{{ end }}

{{ define "print-review" }}
  <h6 class="fw-bold">
    {{ .Title }}<br />
    <span class="small"><a href="#">{{ .Params.author }}</a></span>
  </h6>
  <img
    src="/images/reviews/{{- .Params.img }}"
    class="img-responsive w-100 mb-3" />
  <h6 class="fw-bold small pb-2">
    {{ .Params.subtitle | safeHTML }}
  </h6>
  <p class="summary small text-primary-emphasis">
    {{ .Params.opening }}
  </p>
  <div class="small">
    {{ .Content }}
  </div>
  <p class="small">
    <a
      target="_blank"
      href="{{ .Params.source }}"
      class="d-flex align-items-center">
      <svg
        fill="none"
        height="24"
        viewBox="0 0 24 24"
        width="24"
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink">
        <filter
          id="a"
          color-interpolation-filters="sRGB"
          filterUnits="userSpaceOnUse"
          height="22"
          width="24"
          x=".5"
          y="1.5">
          <feFlood flood-opacity="0" result="BackgroundImageFix" />
          <feBlend
            in="SourceGraphic"
            in2="BackgroundImageFix"
            mode="normal"
            result="shape" />
          <feColorMatrix
            in="SourceAlpha"
            result="hardAlpha"
            type="matrix"
            values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" />
          <feOffset />
          <feGaussianBlur stdDeviation=".25" />
          <feComposite in2="hardAlpha" k2="-1" k3="1" operator="arithmetic" />
          <feColorMatrix
            type="matrix"
            values="0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.3 0" />
          <feBlend
            in2="shape"
            mode="normal"
            result="effect1_innerShadow_19_598" />
          <feColorMatrix
            in="SourceAlpha"
            result="hardAlpha"
            type="matrix"
            values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" />
          <feOffset dx="-1" dy="1" />
          <feGaussianBlur stdDeviation="1" />
          <feComposite in2="hardAlpha" k2="-1" k3="1" operator="arithmetic" />
          <feColorMatrix
            type="matrix"
            values="0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.25 0" />
          <feBlend
            in2="effect1_innerShadow_19_598"
            mode="normal"
            result="effect2_innerShadow_19_598" />
          <feColorMatrix
            in="SourceAlpha"
            result="hardAlpha"
            type="matrix"
            values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" />
          <feOffset dx="2" />
          <feGaussianBlur stdDeviation="2" />
          <feComposite in2="hardAlpha" k2="-1" k3="1" operator="arithmetic" />
          <feColorMatrix
            type="matrix"
            values="0 0 0 0 0.220833 0 0 0 0 0.220833 0 0 0 0 0.220833 0 0 0 0.28 0" />
          <feBlend
            in2="effect2_innerShadow_19_598"
            mode="normal"
            result="effect3_innerShadow_19_598" />
          <feColorMatrix
            in="SourceAlpha"
            result="hardAlpha"
            type="matrix"
            values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" />
          <feOffset dx="1" dy="1" />
          <feGaussianBlur stdDeviation="1.5" />
          <feComposite in2="hardAlpha" k2="-1" k3="1" operator="arithmetic" />
          <feColorMatrix
            type="matrix"
            values="0 0 0 0 0.2 0 0 0 0 0.199167 0 0 0 0 0.199217 0 0 0 0.1 0" />
          <feBlend
            in2="effect3_innerShadow_19_598"
            mode="normal"
            result="effect4_innerShadow_19_598" />
        </filter>
        <pattern
          id="b"
          height=".791667"
          patternContentUnits="objectBoundingBox"
          width="1.05556" />
        <g
          filter="url(#a)"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="1">
          <path
            d="m18 13v6c0 .5304-.2107 1.0391-.5858 1.4142s-.8838.5858-1.4142.5858h-11c-.53043 0-1.03914-.2107-1.41421-.5858-.37508-.3751-.58579-.8838-.58579-1.4142v-11c0-.53043.21071-1.03914.58579-1.41421.37507-.37508.88378-.58579 1.41421-.58579h6m4-3h6m0 0v6m0-6-11 11"
            stroke="#000" />
          <path
            d="m18 13v6c0 .5304-.2107 1.0391-.5858 1.4142s-.8838.5858-1.4142.5858h-11c-.53043 0-1.03914-.2107-1.41421-.5858-.37508-.3751-.58579-.8838-.58579-1.4142v-11c0-.53043.21071-1.03914.58579-1.41421.37507-.37508.88378-.58579 1.41421-.58579h6m4-3h6m0 0v6m0-6-11 11"
            stroke="url(#b)"
            stroke-opacity=".05" />
        </g>
      </svg>
      Continue reading</a
    >
  </p>
  <hr />
{{ end }}

{{ define "video-review" }}
  <h6 class="fw-bold">
    {{ .Title }}<br />
    <span class="small"><a href="#">{{ .Params.author }}</a></span>
  </h6>
  {{ .Content }}
  <h6 class="fw-bold small pt-1 pb-3">
    {{ .Params.subtitle }}
  </h6>
  <hr />
{{ end }}
